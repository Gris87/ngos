#ifndef COM_NGOS_SHARED_UEFIBASE_SECTIONS_SECTION0_COM_NGOS_SHARED_COMMON_CPU_CPU_H                                                                                                                      // Colorize: green
#define COM_NGOS_SHARED_UEFIBASE_SECTIONS_SECTION0_COM_NGOS_SHARED_COMMON_CPU_CPU_H                                                                                                                      // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
#include <buildconfig.h>                                                                                                                                                                                 // Colorize: green
#include <com/ngos/shared/common/cpu/cpu.h>                                                                                                                                                              // Colorize: green
#include <com/ngos/shared/uefibase/testengine.h>                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
#if NGOS_BUILD_TEST_MODE == OPTION_YES                                                                                                                                                                   // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
TEST_CASES(section0, com_ngos_shared_common_cpu_cpu);                                                                                                                                                    // Colorize: green
{                                                                                                                                                                                                        // Colorize: green
    TEST_CASE("setFeature()/clearFeature()/hasFeature()");                                                                                                                                               // Colorize: green
    {                                                                                                                                                                                                    // Colorize: green
        good_U32 temp = CPU::sFeatures[(u64)x86FeatureWord::NGOS_OTHER_FEATURES];                                                                                                                        // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasFeature(X86Feature::CPUID),                       true);                                                                                                              // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasFeature(X86Feature::ALWAYS_ZERO),                 false);                                                                                                             // Colorize: green
        TEST_ASSERT_EQUALS(CPU::sFeatures[(u64)x86FeatureWord::NGOS_OTHER_FEATURES], temp);                                                                                                              // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::setFeature(X86Feature::ALWAYS_ZERO),                 NgosStatus::OK);                                                                                                    // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasFeature(X86Feature::CPUID),                       true);                                                                                                              // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasFeature(X86Feature::ALWAYS_ZERO),                 true);                                                                                                              // Colorize: green
        TEST_ASSERT_EQUALS(CPU::sFeatures[(u64)x86FeatureWord::NGOS_OTHER_FEATURES], temp | 0x01);                                                                                                       // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::clearFeature(X86Feature::ALWAYS_ZERO),               NgosStatus::OK);                                                                                                    // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasFeature(X86Feature::CPUID),                       true);                                                                                                              // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasFeature(X86Feature::ALWAYS_ZERO),                 false);                                                                                                             // Colorize: green
        TEST_ASSERT_EQUALS(CPU::sFeatures[(u64)x86FeatureWord::NGOS_OTHER_FEATURES], temp);                                                                                                              // Colorize: green
    }                                                                                                                                                                                                    // Colorize: green
    TEST_CASE_END();                                                                                                                                                                                     // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    TEST_CASE("setBug()/clearBug()/hasBug()");                                                                                                                                                           // Colorize: green
    {                                                                                                                                                                                                    // Colorize: green
        good_U32 temp = CPU::sBugs[(u64)x86BugWord::NGOS_COMMON_BUGS];                                                                                                                                   // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasBug(X86Bug::ALWAYS_ZERO),              false);                                                                                                                        // Colorize: green
        TEST_ASSERT_EQUALS(CPU::sBugs[(u64)x86BugWord::NGOS_COMMON_BUGS], temp);                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::setBug(X86Bug::ALWAYS_ZERO),              NgosStatus::OK);                                                                                                               // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasBug(X86Bug::ALWAYS_ZERO),              true);                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::sBugs[(u64)x86BugWord::NGOS_COMMON_BUGS], temp | 0x01);                                                                                                                  // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::clearBug(X86Bug::ALWAYS_ZERO),            NgosStatus::OK);                                                                                                               // Colorize: green
        TEST_ASSERT_EQUALS(CPU::hasBug(X86Bug::ALWAYS_ZERO),              false);                                                                                                                        // Colorize: green
        TEST_ASSERT_EQUALS(CPU::sBugs[(u64)x86BugWord::NGOS_COMMON_BUGS], temp);                                                                                                                         // Colorize: green
    }                                                                                                                                                                                                    // Colorize: green
    TEST_CASE_END();                                                                                                                                                                                     // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    TEST_CASE("isCpuIdLevelSupported()");                                                                                                                                                                // Colorize: green
    {                                                                                                                                                                                                    // Colorize: green
        CpuidLeaf temp  = CPU::sCpuidLevel;                                                                                                                                                              // Colorize: green
        CpuidLeaf temp2 = CPU::sExtendedCpuidLevel;                                                                                                                                                      // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        CPU::sCpuidLevel         = CpuidLeaf::MONITOR_AND_MWAIT_PARAMETERS;                                                                                                                              // Colorize: green
        CPU::sExtendedCpuidLevel = CpuidLeaf::EXTENDED_L2_CACHE_FEATURES;                                                                                                                                // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::isCpuIdLevelSupported(CpuidLeaf::MONITOR_AND_MWAIT_PARAMETERS),                           true);                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::isCpuIdLevelSupported(CpuidLeaf::DETERMINISTIC_CACHE_PARAMETERS),                         true);                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::isCpuIdLevelSupported(CpuidLeaf::DIGITAL_THERMAL_SENSOR_AND_POWER_MANAGEMENT_PARAMETERS), false);                                                                        // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::isCpuIdLevelSupported(CpuidLeaf::EXTENDED_L2_CACHE_FEATURES), true);                                                                                                     // Colorize: green
        TEST_ASSERT_EQUALS(CPU::isCpuIdLevelSupported(CpuidLeaf::L1_CACHE_IDENTIFIERS),       true);                                                                                                     // Colorize: green
        TEST_ASSERT_EQUALS(CPU::isCpuIdLevelSupported(CpuidLeaf::ADVANCED_POWER_MANAGEMENT),  false);                                                                                                    // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        CPU::sCpuidLevel         = temp;                                                                                                                                                                 // Colorize: green
        CPU::sExtendedCpuidLevel = temp2;                                                                                                                                                                // Colorize: green
    }                                                                                                                                                                                                    // Colorize: green
    TEST_CASE_END();                                                                                                                                                                                     // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    TEST_CASE("simplifyModelName()");                                                                                                                                                                // Colorize: green
    {                                                                                                                                                                                                    // Colorize: green
        good_Char8 modelName[49];                                                                                                                                                                        // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(strcpy(modelName, "ABC   "), modelName);                                                                                                                                      // Colorize: green
        TEST_ASSERT_EQUALS(strcmp(modelName, "ABC   "), 0);                                                                                                                                              // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::simplifyModelName(modelName), NgosStatus::OK);                                                                                                                           // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(strcmp(modelName, "ABC"), 0);                                                                                                                                                 // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(strcpy(modelName, "   ABC"), modelName);                                                                                                                                      // Colorize: green
        TEST_ASSERT_EQUALS(strcmp(modelName, "   ABC"), 0);                                                                                                                                              // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::simplifyModelName(modelName), NgosStatus::OK);                                                                                                                           // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(strcmp(modelName, "ABC"), 0);                                                                                                                                                 // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(strcpy(modelName, "   ABC   "), modelName);                                                                                                                                   // Colorize: green
        TEST_ASSERT_EQUALS(strcmp(modelName, "   ABC   "), 0);                                                                                                                                           // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::simplifyModelName(modelName), NgosStatus::OK);                                                                                                                           // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(strcmp(modelName, "ABC"), 0);                                                                                                                                                 // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(strcpy(modelName, "    0123456789012345678901234567890123456789    "), modelName);                                                                                            // Colorize: green
        TEST_ASSERT_EQUALS(strcmp(modelName, "    0123456789012345678901234567890123456789    "), 0);                                                                                                    // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(CPU::simplifyModelName(modelName), NgosStatus::OK);                                                                                                                           // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        TEST_ASSERT_EQUALS(strcmp(modelName, "0123456789012345678901234567890123456789"), 0);                                                                                                            // Colorize: green
    }                                                                                                                                                                                                    // Colorize: green
    TEST_CASE_END();                                                                                                                                                                                     // Colorize: green
}                                                                                                                                                                                                        // Colorize: green
TEST_CASES_END();                                                                                                                                                                                        // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
#endif                                                                                                                                                                                                   // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
#endif // COM_NGOS_SHARED_UEFIBASE_SECTIONS_SECTION0_COM_NGOS_SHARED_COMMON_CPU_CPU_H                                                                                                                    // Colorize: green
