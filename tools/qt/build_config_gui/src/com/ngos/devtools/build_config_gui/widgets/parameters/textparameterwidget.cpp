#include "textparameterwidget.h"                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
#include <QDebug>                                                                                                                                                                                        // Colorize: green
#include <QVBoxLayout>                                                                                                                                                                                   // Colorize: green
                                                                                                                                                                                                         // Colorize: green
#include <com/ngos/devtools/build_config_gui/widgets/common/trackinggroupbox.h>                                                                                                                          // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
TextParameterWidget::TextParameterWidget(const QString &id, const QHash<QString, QString> &metaInformation, QWidget *parent)                                        // Colorize: green
    : ParameterWidget(id, metaInformation, parent)                                                                                                                                              // Colorize: green
    , mLineEdit(nullptr)                                                                                                                                                                                 // Colorize: green
{                                                                                                                                                                                                        // Colorize: green
    TrackingGroupBox *groupBox = new TrackingGroupBox(mName, this);                                                                                                                                      // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    mLineEdit = new TrackingLineEdit(prepareValue(mValue), groupBox);                                                                                                                                    // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    // Create layout and put groupBox into it                                                                                                                                                            // Colorize: green
    {                                                                                                                                                                                                    // Colorize: green
        QVBoxLayout *layout = new QVBoxLayout(this);                                                                                                                                                     // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        layout->setSpacing(0);                                                                                                                                                                           // Colorize: green
        layout->setContentsMargins(0, 0, 0, 0);                                                                                                                                                          // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        layout->addWidget(groupBox);                                                                                                                                                                     // Colorize: green
    }                                                                                                                                                                                                    // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    // Create layout and put mLineEdit into it                                                                                                                                                           // Colorize: green
    {                                                                                                                                                                                                    // Colorize: green
        QVBoxLayout *layout = new QVBoxLayout(groupBox);                                                                                                                                                 // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        layout->setSpacing(4);                                                                                                                                                                           // Colorize: green
        layout->setContentsMargins(4, 4, 4, 4);                                                                                                                                                          // Colorize: green
                                                                                                                                                                                                         // Colorize: green
        layout->addWidget(mLineEdit);                                                                                                                                                                    // Colorize: green
    }                                                                                                                                                                                                    // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    connect(mLineEdit, SIGNAL(textChanged(const QString &)), this, SLOT(lineEditTextChanged(const QString &)));                                                                                          // Colorize: green
    connect(mLineEdit, SIGNAL(entered()),                    this, SLOT(widgetEntered()));                                                                                                               // Colorize: green
    connect(mLineEdit, SIGNAL(leaved()),                     this, SLOT(widgetLeaved()));                                                                                                                // Colorize: green
    connect(groupBox,  SIGNAL(entered()),                    this, SLOT(widgetEntered()));                                                                                                               // Colorize: green
    connect(groupBox,  SIGNAL(leaved()),                     this, SLOT(widgetLeaved()));                                                                                                                // Colorize: green
}                                                                                                                                                                                                        // Colorize: green
                                                                                                                                                                                                         // Colorize: green
void TextParameterWidget::setValue(const QString &value)                                                                                                                                                 // Colorize: green
{                                                                                                                                                                                                        // Colorize: green
    QString newValue = prepareValue(value);                                                                                                                                                              // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    ParameterWidget::setValue('\"' + newValue + '\"');                                                                                                                                                   // Colorize: green
    mLineEdit->setText(newValue);                                                                                                                                                                        // Colorize: green
}                                                                                                                                                                                                        // Colorize: green
                                                                                                                                                                                                         // Colorize: green
QString TextParameterWidget::generatePrivateDetails()                                                                                                                                                    // Colorize: green
{                                                                                                                                                                                                        // Colorize: green
    return  "<h2>Values:</h2>"                                                                                                                                                                           // Colorize: green
            "<b>Default:</b> " + mDefault + "<br>" +                                                                                                                                                     // Colorize: green
            "<b>Current:</b> " + mValue;                                                                                                                                                                 // Colorize: green
}                                                                                                                                                                                                        // Colorize: green
                                                                                                                                                                                                         // Colorize: green
void TextParameterWidget::lineEditTextChanged(const QString &text)                                                                                                                                       // Colorize: green
{                                                                                                                                                                                                        // Colorize: green
    setValue(text);                                                                                                                                                                                      // Colorize: green
}                                                                                                                                                                                                        // Colorize: green
                                                                                                                                                                                                         // Colorize: green
QString TextParameterWidget::prepareValue(const QString &value) const                                                                                                                                    // Colorize: green
{                                                                                                                                                                                                        // Colorize: green
    if (                                                                                                                                                                                                 // Colorize: green
        value.length() > 1                                                                                                                                                                               // Colorize: green
        &&                                                                                                                                                                                               // Colorize: green
        value.startsWith('\"')                                                                                                                                                                           // Colorize: green
        &&                                                                                                                                                                                               // Colorize: green
        value.endsWith('\"')                                                                                                                                                                             // Colorize: green
       )                                                                                                                                                                                                 // Colorize: green
    {                                                                                                                                                                                                    // Colorize: green
        return value.mid(1, value.length() - 2);                                                                                                                                                         // Colorize: green
    }                                                                                                                                                                                                    // Colorize: green
                                                                                                                                                                                                         // Colorize: green
    return value;                                                                                                                                                                                        // Colorize: green
}                                                                                                                                                                                                        // Colorize: green
